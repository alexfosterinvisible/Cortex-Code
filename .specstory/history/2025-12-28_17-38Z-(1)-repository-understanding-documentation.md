<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 7e30ded5-3189-4fb4-a328-7b1fae98cead (2025-12-28 17:38Z) -->

# (1) Repository understanding documentation (2025-12-28 17:38Z)

_**User (2025-12-28 17:38Z)**_

What core documentation / examples does an agent need to read to have a very good udnerstanding of how this repo works?

---

_**Agent (model claude-4.5-opus-high-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The user is asking about what core documentation and examples an agent would need to read to understand how this repository works. Let me explore the repository structure to identify the key documentation files and examples.

From the project layout, I can see:
1. `/docs/` - Contains documentation files
2. `/commands/` - Contains command documentation
3. `/commands/examples/` - Contains example files
4. `/README.md` - Main readme
5. Various Python files in `/adw/` that define the core functionality

Let me read the key documentation files to understand what's available and what would be most useful for understanding the repo.</details></think>

---

Let me explore the key documentation and examples in this repository to identify what's essential for understanding it.

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/README.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/docs/ORCHESTRATOR_GUIDE.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/commands/examples/README.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="list_dir">
<details>
            <summary>Tool use: **list_dir** â€¢ Listed directory, 0 results</summary>
        
No results found
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Good, I have a good overview of the documentation. Let me also read some key files:
1. The main CLI entry point to understand the commands
2. A couple of core workflow files to understand the architecture
3. The implement.md command since it's central to the build phase
4. The agent.py to understand how agents work</details></think>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/adw/cli.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/adw/agent.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/commands/implement.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/adw/workflows/sdlc.py</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Let me also read a couple more key files to complete the picture:1. The config.py to understand configuration loading2. The state.py to understand how state is managed3. A few workflow files to see the pattern</details></think>

---

Let me also check a few more key files to complete the picture:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/adw/config.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/adw/state.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/commands/feature.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/adw/workflows/plan.py</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I have a very good understanding of this repo. Let me compile a comprehensive answer about what documentation an agent needs to read to understand this repo.</details></think>

---

Based on my exploration, here's the **essential reading list** for an agent to understand this ADW Framework:

---

## ğŸ“š Core Documentation (Priority Order)

### 1. **`docs/ORCHESTRATOR_GUIDE.md`** â­ MOST IMPORTANT
This is the single most comprehensive document. It explains:
- Complete workflow lifecycle (planâ†’buildâ†’testâ†’reviewâ†’documentâ†’ship)
- CLI commands and their usage
- State & logs locations
- Decision tree for error handling
- Parallel execution support
- GitHub integration patterns

### 2. **`README.md`**
Setup and configuration essentials:
- Package installation
- `.adw.yaml` configuration schema
- `.env` required variables
- Verification checklist
- Basic CLI usage examples

### 3. **`commands/examples/README.md`**
Understanding the command system:
- What app-specific vs framework commands are
- How to customize templates
- Why commands use `[bracketed]` placeholders

---

## ğŸ”§ Key Source Files (Architecture Understanding)

| File | Purpose |
|------|---------|
| `adw/cli.py` | Entry point - maps CLI commands to workflow modules |
| `adw/config.py` | `ADWConfig` dataclass - loads `.adw.yaml`, handles paths |
| `adw/state.py` | `ADWState` class - persistent JSON state per workflow |
| `adw/agent.py` | Claude Code execution - prompts, retry logic, model selection |
| `adw/workflows/sdlc.py` | Main orchestration - chains all phases together |
| `adw/workflows/plan.py` | Example workflow - shows full pattern (fetchâ†’classifyâ†’branchâ†’worktreeâ†’planâ†’commitâ†’PR) |

---

## ğŸ“ Command Templates (Understanding Prompts)

| Command | Role |
|---------|------|
| `commands/implement.md` | Core build prompt - simple but central |
| `commands/feature.md` | Full planning template with detailed `Plan Format` |
| `commands/classify_issue.md` | Issue classification (`/chore`, `/bug`, `/feature`) |
| `commands/review.md` | Review process template |

---

## ğŸ¯ Key Concepts to Understand

1. **ADW ID** - Unique 8-char identifier per workflow instance
2. **Isolated Worktrees** - Git worktrees under `artifacts/{project_id}/trees/{adw-id}/`  
3. **Port Allocation** - Deterministic ports (9100-9114 backend, 9200-9214 frontend) per instance
4. **State Persistence** - `adw_state.json` carries: `adw_id`, `issue_number`, `branch_name`, `plan_file`, `worktree_path`, `model_set`
5. **Model Selection** - `base` (Sonnet) vs `heavy` (Opus) per command type
6. **Agent Logs** - JSONL format in `artifacts/{org}/{repo}/{adw-id}/{agent}/raw_output.jsonl`

---

## ğŸš€ Minimal Quick-Start Reading

If time-constrained, read just these three:

1. `docs/ORCHESTRATOR_GUIDE.md` - The "how it all works" guide
2. `adw/workflows/sdlc.py` - See the orchestration flow
3. `adw/workflows/plan.py` - Understand a complete single-phase workflow

---

_**User (2025-12-28 17:38Z)**_

What's the process for installing this in another repo so it runs locally? Also check this: /adw-setup is correct.

--- Cursor Command: adw-setup.md ---
# ADW Framework Setup & Orchestrator Reference

Complete reference for setting up and running ADW (AI Developer Workflow) in any repository.

---

## Quick Setup (New Repo)

### 1. Add ADW as Dependency

```bash
# In your project root
uv add adw-framework --dev --editable /Users/dev3/code4b/adw-framework
```

### 2. Create `.adw.yaml`

```yaml
# .adw.yaml - ADW Framework Configuration
project_id: "github-owner/repo-name"  # Your GitHub repo
artifacts_dir: "./artifacts"           # Where ADW stores state/worktrees

# Optional port configuration (defaults shown)
# ports:
#   backend_start: 9100
#   frontend_start: 9200
#   max_instances: 15
```

### 3. Copy Command Files

```bash
# ADW needs these Claude Code commands
mkdir -p .claude/commands
cp /Users/dev3/code4b/adw-framework/commands/*.md .claude/commands/

# Verify
ls .claude/commands/*.md
# Should see: classify_issue.md, chore.md, bug.md, feature.md, 
#             implement.md, commit.md, generate_branch_name.md, etc.
```

### 4. Verify Setup

```bash
uv run adw --help
# Should show: plan, build, test, review, document, ship, sdlc, zte, etc.
```

---

## Core Commands

### Individual Phases

| Command                      | Purpose                                        | Creates ADW ID? |
|------------------------------|------------------------------------------------|-----------------|
| adw plan <issue>             | Classify â†’ Branch â†’ Worktree â†’ Plan spec       | âœ… Yes          |
| adw build <issue> <id>       | Implement plan in worktree                     | âŒ No           |
| adw test <issue> <id>        | Run tests, auto-fix (3 retries)                | âŒ No           |
| adw review <issue> <id>      | Validate against spec                          | âŒ No           |
| adw document <issue> <id>    | Generate docs                                  | âŒ No           |
| adw ship <issue> <id>        | Approve + squash merge PR                      | âŒ No           |

### Composite Workflows

| Command                          | Phases                                    | Auto-Merge?     |
|-----------------------------------|-------------------------------------------|-----------------|
| adw sdlc <issue> [--skip-e2e]     | planâ†’buildâ†’testâ†’reviewâ†’document           | âŒ Manual       |
| adw zte <issue>                   | planâ†’buildâ†’testâ†’reviewâ†’documentâ†’ship      | âœ… Auto âš ï¸      |


### Utility Commands

```bash
adw monitor           # Poll GitHub every 20s for new issues
adw webhook           # Real-time GitHub webhook listener
adw cleanup <id>      # Remove worktree and clean state
```

---

## Issue Classification Flow

ADW uses `/classify_issue` to route issues:

```
GitHub Issue â†’ classify_issue â†’ Command Selected
                    â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼               â–¼               â–¼               â–¼
 /chore          /bug          /feature          0 (stop)
    â”‚               â”‚               â”‚
    â–¼               â–¼               â–¼
 chore.md        bug.md        feature.md
 (simple)       (surgical)    (extensible)
```

### Classification Triggers

| Classification | Triggered By |
|---------------|--------------|
| `/chore` | Maintenance, docs, refactoring, cleanup |
| `/bug` | Something broken, error, regression |
| `/feature` | New functionality, enhancement |
| `/patch` | Quick targeted fix |
| `0` | Unrecognized â†’ workflow stops |

---

## State & Logs

### Directory Structure

```
artifacts/
â””â”€â”€ {github-owner}/
    â””â”€â”€ {repo-name}/
        â”œâ”€â”€ {adw_id}/                    # ADW state directory
        â”‚   â”œâ”€â”€ adw_state.json           # Persistent state
        â”‚   â”œâ”€â”€ issue_classifier/        # Classifier logs
        â”‚   â”œâ”€â”€ sdlc_planner/            # Planning logs
        â”‚   â””â”€â”€ sdlc_implementor/        # Build logs
        â””â”€â”€ trees/
            â””â”€â”€ {adw_id}/                # Isolated git worktree
                â”œâ”€â”€ .ports.env           # Port assignments
                â””â”€â”€ specs/               # Generated plan files
```

### State File (`adw_state.json`)

```json
{
  "adw_id": "8035e781",
  "issue_number": "5",
  "branch_name": "feat-issue-5-adw-8035e781-add-version-info-cli",
  "plan_file": "specs/issue-5-adw-8035e781-sdlc_planner-add-version-info-cli.md",
  "issue_class": "/feature",
  "worktree_path": "/path/to/artifacts/.../trees/8035e781",
  "backend_port": 9101,
  "frontend_port": 9201,
  "model_set": "base",
  "all_adws": ["adw_plan_iso", "adw_build_iso", "adw_test_iso"]
}
```

### Reading Logs

```bash
# Latest classifier output
cat artifacts/*/trees/{adw_id}/issue_classifier/*.log

# Planning output
cat artifacts/*/trees/{adw_id}/sdlc_planner/*.log

# Full state
cat artifacts/*/{adw_id}/adw_state.json | jq .
```

---

## Orchestrator Workflow

### Starting a New Issue

```bash
# 1. Create GitHub issue
gh issue create --title "[Feature] Add X" --body "## Goal\n..."

# 2. Run full SDLC (recommended)
uv run adw sdlc <issue_number> --skip-e2e

# Or run phases individually:
uv run adw plan <issue_number>
# Note the ADW ID from output
uv run adw build <issue_number> <adw_id>
uv run adw test <issue_number> <adw_id>
uv run adw review <issue_number> <adw_id>
```

### Resuming a Workflow

```bash
# Find existing ADW state
ls artifacts/*/*/adw_state.json

# Resume with existing ID
uv run adw build <issue_number> <existing_adw_id>
```

### Checking Progress

```bash
# View PR status
gh pr view <pr_number>

# View issue comments (ADW posts progress)
gh issue view <issue_number> --comments

# Check worktree state
cd artifacts/*/trees/<adw_id>
git status
git log --oneline -5
```

### Cleanup

```bash
# Remove specific worktree
git worktree remove artifacts/*/trees/<adw_id>

# Or use ADW cleanup
uv run adw cleanup <adw_id>
```

---

## Orchestrator Decision Tree

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   New Task Arrives                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Is there a GitHub Issue for this?                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼ NO                      â–¼ YES
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Create issue   â”‚        â”‚ Get issue #    â”‚
     â”‚ with gh cli    â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
             â”‚                         â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Run: uv run adw sdlc <issue>                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Monitor Progress                           â”‚
â”‚  â€¢ Check gh issue view <n> --comments                        â”‚
â”‚  â€¢ Check gh pr view <n>                                      â”‚
â”‚  â€¢ Review worktree: cd artifacts/.../trees/<id>              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼ FAILED                  â–¼ SUCCESS
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Check logs     â”‚        â”‚ Review PR      â”‚
     â”‚ Resume phase   â”‚        â”‚ Merge if OK    â”‚
     â”‚ with adw_id    â”‚        â”‚ Clean up       â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Common Issues

### "Invalid command selected"
**Cause:** `classify_issue` returned empty or unexpected output
**Fix:** Check issue title/body has clear intent (feature/bug/chore)

### "ModuleNotFoundError: adw"
**Cause:** ADW not installed
**Fix:** `uv add adw-framework --dev --editable /path/to/adw-framework`

### "No .adw.yaml found"
**Cause:** Missing config file
**Fix:** Create `.adw.yaml` in project root (see Quick Setup)

### Network errors posting comments
**Cause:** Transient GitHub API failures
**Fix:** Re-run with existing ADW ID: `uv run adw <phase> <issue> <adw_id>`

### Worktree already exists
**Cause:** Previous run left worktree
**Fix:** `git worktree remove artifacts/.../trees/<adw_id>` then retry

---

## Environment Requirements

- `uv` - Python package manager
- `gh` - GitHub CLI (authenticated)
- `git` - Git with worktree support
- Claude Code - For agent execution
- `.env` with `ANTHROPIC_API_KEY`

---

## Example: Full Workflow

```bash
# 1. Setup (one-time)
uv add adw-framework --dev --editable /Users/dev3/code4b/adw-framework
# Create .adw.yaml (see Quick Setup)
cp /Users/dev3/code4b/adw-framework/commands/*.md .claude/commands/

# 2. Create issue
gh issue create \
  --title "[Feature] Add dark mode support" \
  --body "## Goal\nAdd dark mode toggle...\n\n## Acceptance Criteria\n- Toggle in settings\n- Persists preference"

# 3. Run SDLC
uv run adw sdlc 7 --skip-e2e

# 4. Review & merge
gh pr view 8
gh pr merge 8 --squash

# 5. Cleanup
git worktree remove artifacts/*/trees/<adw_id>
```

---

**ADW ID Format:** 8-character hex (e.g., `8035e781`)  
**Branch Format:** `{type}-issue-{n}-adw-{id}-{description}`  
**Plan Format:** `specs/issue-{n}-adw-{id}-sdlc_planner-{description}.md`


--- End Command ---

---

_**Agent (model claude-4.5-opus-high-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The user wants me to:
1. Verify the installation process for using ADW in another repo
2. Check if the `/adw-setup` command file they've created is correct

Let me compare their setup guide against the actual implementation in the repo to verify accuracy.

Key things to verify:
1. Installation command - `uv add adw-framework --dev --editable /path`
2. `.adw.yaml` configuration schema
3. Whether commands need to be copied manually
4. The state/logs directory structure
5. CLI commands and their arguments
6. Classification flow
7. State file schema

Let me check the actual implementation details.</details></think>

---

Let me verify the setup guide against the actual implementation:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/pyproject.toml</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/adw/data_types.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/env.example</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now let me check the config.py more closely to verify the .adw.yaml schema, and also check if commands are bundled in the wheel or need manual copying:</details></think>

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** â€¢ Grep for "commands" in "/Users/dev3/code4b/adw-framework/adw/config.py" â€¢ 7 matches</summary>

Output mode: content


| File | Content | Line |
|------|------|------|
| `adw/config.py` | `commands: List[Path] = field(default_factory=list)` | L22 |
| `adw/config.py` | `"commands": [],` | L48 |
| `adw/config.py` | `# Parse commands` | L74 |
| `adw/config.py` | `for cmd_path_str in config_data.get("commands", []):` | L78 |
| `adw/config.py` | `# If no commands specified, add framework commands by default` | L87 |
| `adw/config.py` | `command_paths.append(framework_root / "commands")` | L89 |
| `adw/config.py` | `commands=command_paths,` | L96 |


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/adw/worktree_ops.py</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I have a complete picture. Let me analyze the issues in the setup guide:

1. **Installation command** - The setup guide says:
   ```bash
   uv add adw-framework --dev --editable /Users/dev3/code4b/adw-framework
   ```
   But the README.md says:
   ```bash
   uv add /Users/dev3/code4b/adw-framework
   ```
   The README approach is simpler. The `--editable` flag isn't standard for `uv add` - uv uses path-based sources differently. Let me check what the correct syntax is.

2. **Commands copying** - The guide says you need to copy commands:
   ```bash
   cp /Users/dev3/code4b/adw-framework/commands/*.md .claude/commands/
   ```
   But looking at config.py lines 87-89:
   ```python
   # If no commands specified, add framework commands by default
   if not command_paths:
       command_paths.append(framework_root / "commands")
   ```
   This means commands DON'T need to be copied manually! The framework automatically uses commands from its own directory. You only need to copy/override specific ones if you want to customize them.

3. **.adw.yaml schema** - The guide shows a simplified version. Looking at config.py and README.md:
   - The guide is missing the `commands` option to specify custom commands
   - The guide uses `max_instances: 15` but the actual config uses `backend_count` and `frontend_count`

4. **State file schema** - The guide is correct! It matches ADWStateData in data_types.py

5. **Missing `.env`** - The setup guide doesn't mention creating `.env` with required variables

6. **Directory structure** - The guide shows slightly different structure (issue_classifier vs sdlc_planner/sdlc_implementor naming)


I'll draft a comprehensive, accurate setup guide that addresses these discrepancies and provides clear, precise instructions for framework installation and configuration.</details></think>

---

Good catch on wanting to verify this! I found several issues in the setup guide. Here's my analysis:

---

## âŒ Issues Found in `/adw-setup`

### 1. **Installation Command is Wrong**

Your guide:
```bash
uv add adw-framework --dev --editable /Users/dev3/code4b/adw-framework
```

**Correct** (from README):
```bash
uv add /Users/dev3/code4b/adw-framework
```

The `uv` package manager doesn't use `--editable` flag the same way pip does. It automatically detects path-based sources.

---

### 2. **Commands DON'T Need Manual Copying** âš ï¸ Major Error

Your guide says:
```bash
mkdir -p .claude/commands
cp /Users/dev3/code4b/adw-framework/commands/*.md .claude/commands/
```

**This is unnecessary!** Looking at `adw/config.py`:

```89:90:adw/config.py
        if not command_paths:
            command_paths.append(framework_root / "commands")
```

The framework **automatically** uses its bundled commands. You only need to copy commands if you want to **override/customize** specific ones.

---

### 3. **Missing `.env` Setup** (REQUIRED)

Your guide doesn't mention `.env`. This is **required** - from `env.example`:

```1:14:env.example
# ADW Framework Environment Variables
# Copy this to .env in your project root and fill in values

# REQUIRED: Anthropic API key for Claude
ANTHROPIC_API_KEY=sk-ant-xxxxx

# REQUIRED: GitHub Personal Access Token (needs repo scope)
GITHUB_PAT=ghp_xxxxx

# REQUIRED: Path to claude CLI binary
CLAUDE_CODE_PATH=/usr/local/bin/claude

# REQUIRED: Your GitHub repo URL
GITHUB_REPO_URL=https://github.com/your-org/your-repo.git
```

---

### 4. **Port Config Schema is Wrong**

Your guide:
```yaml
ports:
  max_instances: 15  # âŒ Wrong
```

**Correct** (from `config.py`):
```yaml
ports:
  backend_start: 9100
  backend_count: 15
  frontend_start: 9200
  frontend_count: 15
```

---

### 5. **Missing `commands` Config Option**

Your `.adw.yaml` example doesn't show how to use custom commands alongside framework commands:

```yaml
commands:
  - "${ADW_FRAMEWORK}/commands"   # Framework commands (auto-expanded)
  - ".claude/commands"            # Your overrides (optional)
```

---

## âœ… Corrected Quick Setup Section

```markdown
## Quick Setup (New Repo)

### 1. Add ADW as Dependency

```bash
cd /path/to/your-project
uv add /Users/dev3/code4b/adw-framework
uv sync
```

### 2. Create `.env` (REQUIRED)

```bash
cp /Users/dev3/code4b/adw-framework/env.example .env
# Edit .env with your values:
#   ANTHROPIC_API_KEY=sk-ant-xxxxx
#   GITHUB_PAT=ghp_xxxxx
#   GITHUB_REPO_URL=https://github.com/you/repo.git
#   CLAUDE_CODE_PATH=/usr/local/bin/claude
```

### 3. Create `.adw.yaml` (REQUIRED)

```yaml
# .adw.yaml - ADW Framework Configuration
project_id: "github-owner/repo-name"  # Your GitHub org/repo
artifacts_dir: "./artifacts"

# Optional: Override default ports
# ports:
#   backend_start: 9100
#   backend_count: 15
#   frontend_start: 9200
#   frontend_count: 15

# Optional: Add custom commands alongside framework commands
# commands:
#   - "${ADW_FRAMEWORK}/commands"
#   - ".claude/commands"
```

### 4. (Optional) Add Custom Commands

Only if you need to override framework commands:
```bash
mkdir -p .claude/commands
# Copy only the specific commands you want to customize:
cp /Users/dev3/code4b/adw-framework/commands/feature.md .claude/commands/
# Edit to match your project structure
```

### 5. Verify Setup

```bash
uv run adw --help
# Should show: plan, build, test, review, document, ship, sdlc, zte, etc.

# Test config loading
uv run python -c "from adw.config import ADWConfig; c = ADWConfig.load(); print(f'project_id: {c.project_id}')"
```
```

---

## Other Minor Corrections

| Section | Issue | Fix |
|---------|-------|-----|
| Logs path | `artifacts/*/trees/{adw_id}/issue_classifier/` | Should be `artifacts/*/{adw_id}/issue_classifier/` (not under trees) |
| State location | Implied under trees | State is at `artifacts/{org}/{repo}/{adw_id}/adw_state.json`, worktrees are at `artifacts/{org}/{repo}/trees/{adw_id}/` |

---

## âœ… What's Correct

- CLI command table
- Classification flow diagram  
- State file schema (matches `ADWStateData`)
- Decision tree
- ADW ID format (8-char hex)
- Branch/plan format patterns
- Environment requirements list

Would you like me to generate a fully corrected version of the command file?

---

_**User (2025-12-28 17:38Z)**_

âŒ Issues Found in /adw-setup
1. Installation Command is Wrong
Your guide:
uv add adw-framework --dev --editable /Users/dev3/code4b/adw-framework
Correct (from README):
uv add /Users/dev3/code4b/adw-framework
The uv package manager doesn't use --editable flag the same way pip does. It automatically detects path-based sources.
---

please try both in a new temp dir and check whatworks / doesn't.

---

_**Agent (model claude-4.5-sonnet-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The user wants me to test both installation commands in a temporary directory to see which one actually works. Let me create a temp directory and test both approaches.

I need to:
1. Create a temporary test directory
2. Initialize a basic Python project with uv
3. Try the first command: `uv add adw-framework --dev --editable /Users/dev3/code4b/adw-framework`
4. Try the second command: `uv add /Users/dev3/code4b/adw-framework`
5. See what actually happens with each

Let me do this systematically.</details></think>

---

I'll test both installation approaches in a temporary directory to see what actually works.

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp && rm -rf adw-test-install && mkdir adw-test-install && cd adw-test-install && uv init --name test-project</summary>

```bash
cd /tmp && rm -rf adw-test-install && mkdir adw-test-install && cd adw-test-install && uv init --name test-project
```

```
Initialized project &#96;test-project&#96;

```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Good, created a test project. Now let me try the first command with --dev --editable flags.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp/adw-test-install && uv add adw-framework --dev --editable /Users/dev3/code4b/adw-framework</summary>

```bash
cd /tmp/adw-test-install && uv add adw-framework --dev --editable /Users/dev3/code4b/adw-framework
```

```
Using CPython 3.11.5
Creating virtual environment at: .venv
error: &#96;adw-framework&#96; did not resolve to a local directory, but the &#96;--editable&#96; flag was provided. Editable installs are only supported for local directories.

```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Aha! The first command fails. The issue is that when you specify the path AFTER the package name, uv treats the package name as a PyPI package and the path gets ignored. Let me try the correct syntax.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp/adw-test-install && rm -rf .venv && uv add --editable /Users/dev3/code4b/adw-framework</summary>

```bash
cd /tmp/adw-test-install && rm -rf .venv && uv add --editable /Users/dev3/code4b/adw-framework
```

```
Using CPython 3.11.5
Creating virtual environment at: .venv
Resolved 30 packages in 174ms
   Building adw-framework @ file:///Users/dev3/code4b/adw-framework
Downloading botocore (13.9MiB)
      Built adw-framework @ file:///Users/dev3/code4b/adw-framework
 Downloading botocore
Prepared 3 packages in 585ms
Installed 28 packages in 76ms
 + adw-framework==0.1.0 (from file:///Users/dev3/code4b/adw-framework)
 + aiosqlite==0.22.1
 + annotated-doc==0.0.4
 + annotated-types==0.7.0
 + anyio==4.12.0
 + boto3==1.42.17
 + botocore==1.42.17
 + click==8.3.1
 + fastapi==0.128.0
 + gitdb==4.0.12
 + gitpython==3.1.45
 + h11==0.16.0
 + idna==3.11
 + jmespath==1.0.1
 + pydantic==2.12.5
 + pydantic-core==2.41.5
 + python-dateutil==2.9.0.post0
 + python-dotenv==1.2.1
 + pyyaml==6.0.3
 + s3transfer==0.16.0
 + schedule==1.2.2
 + six==1.17.0
 + smmap==5.0.2
 + starlette==0.50.0
 + typing-extensions==4.15.0
 + typing-inspection==0.4.2
 + urllib3==2.6.2
 + uvicorn==0.40.0

```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Great! The --editable flag works when you use just the path. Now let me check the pyproject.toml to see what it added.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp/adw-test-install && cat pyproject.toml</summary>

```bash
cd /tmp/adw-test-install && cat pyproject.toml
```

```
[project]
name = "test-project"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = "&gt;=3.11"
dependencies = [
    "adw-framework",
]

[tool.uv.sources]
adw-framework = { path = "../../../Users/dev3/code4b/adw-framework", editable = true }

```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Good! With --editable, it adds `editable = true` to the source config. Now let me test the second method (without --editable).</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp && rm -rf adw-test-install2 && mkdir adw-test-install2 && cd adw-test-install2 && uv init --name test-project2</summary>

```bash
cd /tmp && rm -rf adw-test-install2 && mkdir adw-test-install2 && cd adw-test-install2 && uv init --name test-project2
```

```
Initialized project &#96;test-project2&#96;

```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now let me try the simple path-only approach without --editable.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp/adw-test-install2 && uv add /Users/dev3/code4b/adw-framework</summary>

```bash
cd /tmp/adw-test-install2 && uv add /Users/dev3/code4b/adw-framework
```

```
Using CPython 3.11.5
Creating virtual environment at: .venv
Resolved 30 packages in 13ms
   Building adw-framework @ file:///Users/dev3/code4b/adw-framework
      Built adw-framework @ file:///Users/dev3/code4b/adw-framework
Prepared 1 package in 307ms
Installed 28 packages in 60ms
 + adw-framework==0.1.0 (from file:///Users/dev3/code4b/adw-framework)
 + aiosqlite==0.22.1
 + annotated-doc==0.0.4
 + annotated-types==0.7.0
 + anyio==4.12.0
 + boto3==1.42.17
 + botocore==1.42.17
 + click==8.3.1
 + fastapi==0.128.0
 + gitdb==4.0.12
 + gitpython==3.1.45
 + h11==0.16.0
 + idna==3.11
 + jmespath==1.0.1
 + pydantic==2.12.5
 + pydantic-core==2.41.5
 + python-dateutil==2.9.0.post0
 + python-dotenv==1.2.1
 + pyyaml==6.0.3
 + s3transfer==0.16.0
 + schedule==1.2.2
 + six==1.17.0
 + smmap==5.0.2
 + starlette==0.50.0
 + typing-extensions==4.15.0
 + typing-inspection==0.4.2
 + urllib3==2.6.2
 + uvicorn==0.40.0

```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
That also works! Now let me check the pyproject.toml to see the difference.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp/adw-test-install2 && cat pyproject.toml</summary>

```bash
cd /tmp/adw-test-install2 && cat pyproject.toml
```

```
[project]
name = "test-project2"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = "&gt;=3.11"
dependencies = [
    "adw-framework",
]

[tool.uv.sources]
adw-framework = { path = "../../../Users/dev3/code4b/adw-framework" }

```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Perfect! So the difference is:
- With `--editable`: `{ path = "...", editable = true }`
- Without `--editable`: `{ path = "..." }`

Now let me verify if the CLI works in both cases and test if editing the source actually works differently.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp/adw-test-install && uv run adw --help</summary>

```bash
cd /tmp/adw-test-install && uv run adw --help
```

```
usage: adw [-h]
           {plan,build,test,review,document,ship,patch,sdlc,zte,monitor,webhook}
           ...

AI Developer Workflow (ADW) CLI

positional arguments:
  {plan,build,test,review,document,ship,patch,sdlc,zte,monitor,webhook}
                        Workflow command
    plan                Plan implementation for an issue
    build               Build implementation from plan
    test                Run tests
    review              Review implementation
    document            Generate documentation
    ship                Ship changes (merge PR)
    patch               Create and implement a patch
    sdlc                Run complete SDLC
    zte                 Run Zero Touch Execution (SDLC + Ship)
    monitor             Run cron monitor
    webhook             Run webhook server

options:
  -h, --help            show this help message and exit

```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Works! Now let me test the non-editable version.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp/adw-test-install2 && uv run adw --help</summary>

```bash
cd /tmp/adw-test-install2 && uv run adw --help
```

```
usage: adw [-h]
           {plan,build,test,review,document,ship,patch,sdlc,zte,monitor,webhook}
           ...

AI Developer Workflow (ADW) CLI

positional arguments:
  {plan,build,test,review,document,ship,patch,sdlc,zte,monitor,webhook}
                        Workflow command
    plan                Plan implementation for an issue
    build               Build implementation from plan
    test                Run tests
    review              Review implementation
    document            Generate documentation
    ship                Ship changes (merge PR)
    patch               Create and implement a patch
    sdlc                Run complete SDLC
    zte                 Run Zero Touch Execution (SDLC + Ship)
    monitor             Run cron monitor
    webhook             Run webhook server

options:
  -h, --help            show this help message and exit

```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Both work for running the CLI! Now let me check if there's a practical difference. The key difference should be: with --editable, changes to the source code are immediately reflected without reinstalling. Let me verify this by checking how the package is installed in each case.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp/adw-test-install && ls -la .venv/lib/python*/site-packages/ | grep adw</summary>

```bash
cd /tmp/adw-test-install && ls -la .venv/lib/python*/site-packages/ | grep adw
```

```
-rw-r--r--   1 dev3  wheel      32 Dec 28 17:49 _adw_framework.pth
drwxr-xr-x  11 dev3  wheel     352 Dec 28 17:49 adw_framework-0.1.0.dist-info

```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Interesting! With --editable, it creates a `.pth` file. Let me check what's in it.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp/adw-test-install && cat .venv/lib/python*/site-packages/_adw_framework.pth</summary>

```bash
cd /tmp/adw-test-install && cat .venv/lib/python*/site-packages/_adw_framework.pth
```

```
/Users/dev3/code4b/adw-framework
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Perfect! So with --editable, it creates a `.pth` file that points to the original source directory. Now let me check the non-editable version.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp/adw-test-install2 && ls -la .venv/lib/python*/site-packages/ | grep adw</summary>

```bash
cd /tmp/adw-test-install2 && ls -la .venv/lib/python*/site-packages/ | grep adw
```

```
drwxr-xr-x  18 dev3  wheel     576 Dec 28 17:50 adw
drwxr-xr-x  11 dev3  wheel     352 Dec 28 17:50 adw_framework-0.1.0.dist-info

```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Aha! Without --editable, it actually copies the entire `adw` directory into site-packages. So:

- **With --editable**: Points to original source via `.pth` file - changes in source are immediately reflected
- **Without --editable**: Copies files into site-packages - need to reinstall after source changes

For framework development, --editable is definitely better! Let me also check if there's a --dev flag that matters.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp && rm -rf adw-test-install3 && mkdir adw-test-install3 && cd adw-test-install3 && uv init --name test-project3 && uv add --dev /Users/dev3/code4b/adw-framework</summary>

```bash
cd /tmp && rm -rf adw-test-install3 && mkdir adw-test-install3 && cd adw-test-install3 && uv init --name test-project3 && uv add --dev /Users/dev3/code4b/adw-framework
```

```
Initialized project &#96;test-project3&#96;
Using CPython 3.11.5
Creating virtual environment at: .venv
Resolved 30 packages in 9ms
   Building adw-framework @ file:///Users/dev3/code4b/adw-framework
      Built adw-framework @ file:///Users/dev3/code4b/adw-framework
Prepared 1 package in 277ms
Installed 28 packages in 59ms
 + adw-framework==0.1.0 (from file:///Users/dev3/code4b/adw-framework)
 + aiosqlite==0.22.1
 + annotated-doc==0.0.4
 + annotated-types==0.7.0
 + anyio==4.12.0
 + boto3==1.42.17
 + botocore==1.42.17
 + click==8.3.1
 + fastapi==0.128.0
 + gitdb==4.0.12
 + gitpython==3.1.45
 + h11==0.16.0
 + idna==3.11
 + jmespath==1.0.1
 + pydantic==2.12.5
 + pydantic-core==2.41.5
 + python-dateutil==2.9.0.post0
 + python-dotenv==1.2.1
 + pyyaml==6.0.3
 + s3transfer==0.16.0
 + schedule==1.2.2
 + six==1.17.0
 + smmap==5.0.2
 + starlette==0.50.0
 + typing-extensions==4.15.0
 + typing-inspection==0.4.2
 + urllib3==2.6.2
 + uvicorn==0.40.0

```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now let me check how --dev affects the pyproject.toml.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp/adw-test-install3 && cat pyproject.toml</summary>

```bash
cd /tmp/adw-test-install3 && cat pyproject.toml
```

```
[project]
name = "test-project3"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = "&gt;=3.11"
dependencies = []

[dependency-groups]
dev = [
    "adw-framework",
]

[tool.uv.sources]
adw-framework = { path = "../../../Users/dev3/code4b/adw-framework" }

```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Excellent! So --dev puts it in `[dependency-groups] dev = [...]` instead of `[project] dependencies = [...]`. This is useful for dependencies that are only needed during development.

Now let me test the combination: --dev --editable together.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp && rm -rf adw-test-install4 && mkdir adw-test-install4 && cd adw-test-install4 && uv init --name test-project4 && uv add --dev --editable /Users/dev3/code4b/adw-framework</summary>

```bash
cd /tmp && rm -rf adw-test-install4 && mkdir adw-test-install4 && cd adw-test-install4 && uv init --name test-project4 && uv add --dev --editable /Users/dev3/code4b/adw-framework
```

```
Initialized project &#96;test-project4&#96;
Using CPython 3.11.5
Creating virtual environment at: .venv
Resolved 30 packages in 8ms
   Building adw-framework @ file:///Users/dev3/code4b/adw-framework
      Built adw-framework @ file:///Users/dev3/code4b/adw-framework
Prepared 1 package in 270ms
Installed 28 packages in 57ms
 + adw-framework==0.1.0 (from file:///Users/dev3/code4b/adw-framework)
 + aiosqlite==0.22.1
 + annotated-doc==0.0.4
 + annotated-types==0.7.0
 + anyio==4.12.0
 + boto3==1.42.17
 + botocore==1.42.17
 + click==8.3.1
 + fastapi==0.128.0
 + gitdb==4.0.12
 + gitpython==3.1.45
 + h11==0.16.0
 + idna==3.11
 + jmespath==1.0.1
 + pydantic==2.12.5
 + pydantic-core==2.41.5
 + python-dateutil==2.9.0.post0
 + python-dotenv==1.2.1
 + pyyaml==6.0.3
 + s3transfer==0.16.0
 + schedule==1.2.2
 + six==1.17.0
 + smmap==5.0.2
 + starlette==0.50.0
 + typing-extensions==4.15.0
 + typing-inspection==0.4.2
 + urllib3==2.6.2
 + uvicorn==0.40.0

```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Great! Now let me see what this combination produces in pyproject.toml.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /tmp/adw-test-install4 && cat pyproject.toml</summary>

```bash
cd /tmp/adw-test-install4 && cat pyproject.toml
```

```
[project]
name = "test-project4"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = "&gt;=3.11"
dependencies = []

[dependency-groups]
dev = [
    "adw-framework",
]

[tool.uv.sources]
adw-framework = { path = "../../../Users/dev3/code4b/adw-framework", editable = true }

```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Perfect! So both flags work together. Now let me clean up the test directories.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: rm -rf /tmp/adw-test-install /tmp/adw-test-install2 /tmp/adw-test-install3 /tmp/adw-test-install4</summary>

```bash
rm -rf /tmp/adw-test-install /tmp/adw-test-install2 /tmp/adw-test-install3 /tmp/adw-test-install4
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Great! Now I have comprehensive test results. Let me summarize the findings for the user.</details></think>

---

## ğŸ§ª Test Results: ADW Installation Methods

I tested all installation approaches. Here's what actually works:

---

### âœ… **Working Commands**

| Command | Result | pyproject.toml |
|---------|--------|----------------|
| `uv add /path/to/adw-framework` | âœ… Works | `dependencies = ["adw-framework"]`<br>`[tool.uv.sources]`<br>`adw-framework = { path = "..." }` |
| `uv add --editable /path/to/adw-framework` | âœ… Works | Same + `editable = true` |
| `uv add --dev /path/to/adw-framework` | âœ… Works | `[dependency-groups]`<br>`dev = ["adw-framework"]` |
| `uv add --dev --editable /path/to/adw-framework` | âœ… Works | Dev group + `editable = true` |

### âŒ **Broken Command** (from your guide)

```bash
uv add adw-framework --dev --editable /path/to/adw-framework
```

**Error:**
```
error: `adw-framework` did not resolve to a local directory, but the 
`--editable` flag was provided. Editable installs are only supported 
for local directories.
```

**Problem:** When you specify a package name first, `uv` treats it as a PyPI package and ignores the path argument.

---

### ğŸ“Š **Key Differences**

| Feature | Without `--editable` | With `--editable` |
|---------|---------------------|-------------------|
| **Installation** | Copies files to `.venv/lib/python*/site-packages/adw/` | Creates `.pth` file pointing to source |
| **Live updates** | âŒ Need to reinstall after changes | âœ… Changes reflected immediately |
| **Use case** | End users consuming stable package | Framework developers iterating |

| Feature | Without `--dev` | With `--dev` |
|---------|----------------|--------------|
| **Location** | `[project] dependencies` | `[dependency-groups] dev` |
| **When installed** | Always | Only in dev mode |
| **Use case** | Production dependency | Dev-only tool |

---

### ğŸ¯ **Recommended Setup for Each Scenario**

#### **For ADW Framework Development:**
```bash
uv add --dev --editable /Users/dev3/code4b/adw-framework
```
âœ… Dev dependency + live updates

#### **For Using ADW in Projects (actively developing both):**
```bash
uv add --editable /Users/dev3/code4b/adw-framework
```
âœ… Production dependency + live updates

#### **For Using ADW in Projects (stable use):**
```bash
uv add /Users/dev3/code4b/adw-framework
```
âœ… Production dependency, copied snapshot

---

### ğŸ“ **Corrected Guide Section**

```markdown
### 1. Add ADW as Dependency

```bash
cd /path/to/your-project

# For active development (recommended - changes in ADW source reflect immediately):
uv add --editable /Users/dev3/code4b/adw-framework

# For dev-only usage:
uv add --dev --editable /Users/dev3/code4b/adw-framework

# For stable production use (copies files):
uv add /Users/dev3/code4b/adw-framework

uv sync
```
```

**Bottom line:** You were close! Just needed to drop the package name and put the path directly after the flags. The `--editable` flag is very useful for development workflows where you want changes to the framework to be immediately available.

---

_**User (2025-12-28 17:38Z)**_

/adw-setup  -approved update this command please.

--- Cursor Command: adw-setup.md ---
# ADW Framework Setup & Orchestrator Reference

Complete reference for setting up and running ADW (AI Developer Workflow) in any repository.

---

## Quick Setup (New Repo)

### 1. Add ADW as Dependency

```bash
# In your project root
uv add adw-framework --dev --editable /Users/dev3/code4b/adw-framework
```

### 2. Create `.adw.yaml`

```yaml
# .adw.yaml - ADW Framework Configuration
project_id: "github-owner/repo-name"  # Your GitHub repo
artifacts_dir: "./artifacts"           # Where ADW stores state/worktrees

# Optional port configuration (defaults shown)
# ports:
#   backend_start: 9100
#   frontend_start: 9200
#   max_instances: 15
```

### 3. Copy Command Files

```bash
# ADW needs these Claude Code commands
mkdir -p .claude/commands
cp /Users/dev3/code4b/adw-framework/commands/*.md .claude/commands/

# Verify
ls .claude/commands/*.md
# Should see: classify_issue.md, chore.md, bug.md, feature.md, 
#             implement.md, commit.md, generate_branch_name.md, etc.
```

### 4. Verify Setup

```bash
uv run adw --help
# Should show: plan, build, test, review, document, ship, sdlc, zte, etc.
```

---

## Core Commands

### Individual Phases

| Command                      | Purpose                                        | Creates ADW ID? |
|------------------------------|------------------------------------------------|-----------------|
| adw plan <issue>             | Classify â†’ Branch â†’ Worktree â†’ Plan spec       | âœ… Yes          |
| adw build <issue> <id>       | Implement plan in worktree                     | âŒ No           |
| adw test <issue> <id>        | Run tests, auto-fix (3 retries)                | âŒ No           |
| adw review <issue> <id>      | Validate against spec                          | âŒ No           |
| adw document <issue> <id>    | Generate docs                                  | âŒ No           |
| adw ship <issue> <id>        | Approve + squash merge PR                      | âŒ No           |

### Composite Workflows

| Command                          | Phases                                    | Auto-Merge?     |
|-----------------------------------|-------------------------------------------|-----------------|
| adw sdlc <issue> [--skip-e2e]     | planâ†’buildâ†’testâ†’reviewâ†’document           | âŒ Manual       |
| adw zte <issue>                   | planâ†’buildâ†’testâ†’reviewâ†’documentâ†’ship      | âœ… Auto âš ï¸      |


### Utility Commands

```bash
adw monitor           # Poll GitHub every 20s for new issues
adw webhook           # Real-time GitHub webhook listener
adw cleanup <id>      # Remove worktree and clean state
```

---

## Issue Classification Flow

ADW uses `/classify_issue` to route issues:

```
GitHub Issue â†’ classify_issue â†’ Command Selected
                    â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼               â–¼               â–¼               â–¼
 /chore          /bug          /feature          0 (stop)
    â”‚               â”‚               â”‚
    â–¼               â–¼               â–¼
 chore.md        bug.md        feature.md
 (simple)       (surgical)    (extensible)
```

### Classification Triggers

| Classification | Triggered By |
|---------------|--------------|
| `/chore` | Maintenance, docs, refactoring, cleanup |
| `/bug` | Something broken, error, regression |
| `/feature` | New functionality, enhancement |
| `/patch` | Quick targeted fix |
| `0` | Unrecognized â†’ workflow stops |

---

## State & Logs

### Directory Structure

```
artifacts/
â””â”€â”€ {github-owner}/
    â””â”€â”€ {repo-name}/
        â”œâ”€â”€ {adw_id}/                    # ADW state directory
        â”‚   â”œâ”€â”€ adw_state.json           # Persistent state
        â”‚   â”œâ”€â”€ issue_classifier/        # Classifier logs
        â”‚   â”œâ”€â”€ sdlc_planner/            # Planning logs
        â”‚   â””â”€â”€ sdlc_implementor/        # Build logs
        â””â”€â”€ trees/
            â””â”€â”€ {adw_id}/                # Isolated git worktree
                â”œâ”€â”€ .ports.env           # Port assignments
                â””â”€â”€ specs/               # Generated plan files
```

### State File (`adw_state.json`)

```json
{
  "adw_id": "8035e781",
  "issue_number": "5",
  "branch_name": "feat-issue-5-adw-8035e781-add-version-info-cli",
  "plan_file": "specs/issue-5-adw-8035e781-sdlc_planner-add-version-info-cli.md",
  "issue_class": "/feature",
  "worktree_path": "/path/to/artifacts/.../trees/8035e781",
  "backend_port": 9101,
  "frontend_port": 9201,
  "model_set": "base",
  "all_adws": ["adw_plan_iso", "adw_build_iso", "adw_test_iso"]
}
```

### Reading Logs

```bash
# Latest classifier output
cat artifacts/*/trees/{adw_id}/issue_classifier/*.log

# Planning output
cat artifacts/*/trees/{adw_id}/sdlc_planner/*.log

# Full state
cat artifacts/*/{adw_id}/adw_state.json | jq .
```

---

## Orchestrator Workflow

### Starting a New Issue

```bash
# 1. Create GitHub issue
gh issue create --title "[Feature] Add X" --body "## Goal\n..."

# 2. Run full SDLC (recommended)
uv run adw sdlc <issue_number> --skip-e2e

# Or run phases individually:
uv run adw plan <issue_number>
# Note the ADW ID from output
uv run adw build <issue_number> <adw_id>
uv run adw test <issue_number> <adw_id>
uv run adw review <issue_number> <adw_id>
```

### Resuming a Workflow

```bash
# Find existing ADW state
ls artifacts/*/*/adw_state.json

# Resume with existing ID
uv run adw build <issue_number> <existing_adw_id>
```

### Checking Progress

```bash
# View PR status
gh pr view <pr_number>

# View issue comments (ADW posts progress)
gh issue view <issue_number> --comments

# Check worktree state
cd artifacts/*/trees/<adw_id>
git status
git log --oneline -5
```

### Cleanup

```bash
# Remove specific worktree
git worktree remove artifacts/*/trees/<adw_id>

# Or use ADW cleanup
uv run adw cleanup <adw_id>
```

---

## Orchestrator Decision Tree

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   New Task Arrives                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Is there a GitHub Issue for this?                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼ NO                      â–¼ YES
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Create issue   â”‚        â”‚ Get issue #    â”‚
     â”‚ with gh cli    â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
             â”‚                         â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Run: uv run adw sdlc <issue>                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Monitor Progress                           â”‚
â”‚  â€¢ Check gh issue view <n> --comments                        â”‚
â”‚  â€¢ Check gh pr view <n>                                      â”‚
â”‚  â€¢ Review worktree: cd artifacts/.../trees/<id>              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼ FAILED                  â–¼ SUCCESS
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Check logs     â”‚        â”‚ Review PR      â”‚
     â”‚ Resume phase   â”‚        â”‚ Merge if OK    â”‚
     â”‚ with adw_id    â”‚        â”‚ Clean up       â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Common Issues

### "Invalid command selected"
**Cause:** `classify_issue` returned empty or unexpected output
**Fix:** Check issue title/body has clear intent (feature/bug/chore)

### "ModuleNotFoundError: adw"
**Cause:** ADW not installed
**Fix:** `uv add adw-framework --dev --editable /path/to/adw-framework`

### "No .adw.yaml found"
**Cause:** Missing config file
**Fix:** Create `.adw.yaml` in project root (see Quick Setup)

### Network errors posting comments
**Cause:** Transient GitHub API failures
**Fix:** Re-run with existing ADW ID: `uv run adw <phase> <issue> <adw_id>`

### Worktree already exists
**Cause:** Previous run left worktree
**Fix:** `git worktree remove artifacts/.../trees/<adw_id>` then retry

---

## Environment Requirements

- `uv` - Python package manager
- `gh` - GitHub CLI (authenticated)
- `git` - Git with worktree support
- Claude Code - For agent execution
- `.env` with `ANTHROPIC_API_KEY`

---

## Example: Full Workflow

```bash
# 1. Setup (one-time)
uv add adw-framework --dev --editable /Users/dev3/code4b/adw-framework
# Create .adw.yaml (see Quick Setup)
cp /Users/dev3/code4b/adw-framework/commands/*.md .claude/commands/

# 2. Create issue
gh issue create \
  --title "[Feature] Add dark mode support" \
  --body "## Goal\nAdd dark mode toggle...\n\n## Acceptance Criteria\n- Toggle in settings\n- Persists preference"

# 3. Run SDLC
uv run adw sdlc 7 --skip-e2e

# 4. Review & merge
gh pr view 8
gh pr merge 8 --squash

# 5. Cleanup
git worktree remove artifacts/*/trees/<adw_id>
```

---

**ADW ID Format:** 8-character hex (e.g., `8035e781`)  
**Branch Format:** `{type}-issue-{n}-adw-{id}-{description}`  
**Plan Format:** `specs/issue-{n}-adw-{id}-sdlc_planner-{description}.md`


--- End Command ---

---

_**Agent (model claude-4.5-sonnet-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The user wants me to update the adw-setup.md command file with all the corrections I identified. Let me compile all the fixes:

1. **Installation command** - Fix to use `uv add --editable /path` (without package name first)
2. **Remove the manual command copying step** - Framework auto-loads commands
3. **Add .env setup** - This is REQUIRED but was missing
4. **Fix port config schema** - Change `max_instances` to `backend_count` and `frontend_count`
5. **Add commands config option** - Show how to override commands
6. **Fix log paths** - State is at `artifacts/{org}/{repo}/{adw_id}/`, not under trees
7. **Add better explanation of when to copy commands**

Let me create a fully corrected version.</details></think>

---

I'll update the adw-setup command with all the corrections:

---

Model supplied an ambiguous edit

---

<think><details><summary>Thought Process</summary>
The file doesn't exist yet. I need to create it from scratch.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="write">

<details><summary>Tool use: **write** â€¢ Edit file: /Users/dev3/code4b/adw-framework/.claude/commands/adw-setup.md</summary>

**Chunk 1**
Lines added: 424, lines removed: 1

```diff
@@ -1,1 +1,424 @@
- 
+ # ADW Framework Setup &amp; Orchestrator Reference
+ 
+ Complete reference for setting up and running ADW (AI Developer Workflow) in any repository.
+ 
+ ---
+ 
+ ## Quick Setup (New Repo)
+ 
+ ### 1. Add ADW as Dependency
+ 
+ &#96;&#96;&#96;bash
+ cd /path/to/your-project
+ 
+ # For active development (recommended - changes in ADW source reflect immediately):
+ uv add --editable /Users/dev3/code4b/adw-framework
+ 
+ # OR for dev-only usage:
+ uv add --dev --editable /Users/dev3/code4b/adw-framework
+ 
+ # OR for stable production use (copies files, no live updates):
+ uv add /Users/dev3/code4b/adw-framework
+ 
+ uv sync
+ &#96;&#96;&#96;
+ 
+ ### 2. Create &#96;.env&#96; (REQUIRED)
+ 
+ &#96;&#96;&#96;bash
+ # Copy template and fill in your values
+ cp /Users/dev3/code4b/adw-framework/env.example .env
+ 
+ # Edit .env with required values:
+ #   ANTHROPIC_API_KEY=sk-ant-xxxxx
+ #   GITHUB_PAT=ghp_xxxxx
+ #   GITHUB_REPO_URL=https://github.com/your-org/your-repo.git
+ #   CLAUDE_CODE_PATH=/usr/local/bin/claude
+ &#96;&#96;&#96;
+ 
+ ### 3. Create &#96;.adw.yaml&#96; (REQUIRED)
+ 
+ &#96;&#96;&#96;yaml
+ # .adw.yaml - ADW Framework Configuration
+ project_id: "github-owner/repo-name"  # Your GitHub org/repo
+ artifacts_dir: "./artifacts"
+ 
+ # Optional: Override default ports (defaults shown)
+ # ports:
+ #   backend_start: 9100
+ #   backend_count: 15
+ #   frontend_start: 9200
+ #   frontend_count: 15
+ 
+ # Optional: Add custom commands alongside framework commands
+ # commands:
+ #   - "${ADW_FRAMEWORK}/commands"   # Framework commands (auto-included if empty)
+ #   - ".claude/commands"            # Your custom overrides
+ &#96;&#96;&#96;
+ 
+ ### 4. (Optional) Customize Commands
+ 
+ **Note:** ADW automatically uses framework commands. Only copy if you need to customize.
+ 
+ &#96;&#96;&#96;bash
+ # Copy only specific commands you want to override:
+ mkdir -p .claude/commands
+ cp /Users/dev3/code4b/adw-framework/commands/feature.md .claude/commands/
+ # Edit feature.md to match your project structure
+ 
+ # Add to .adw.yaml:
+ # commands:
+ #   - "${ADW_FRAMEWORK}/commands"
+ #   - ".claude/commands"
+ &#96;&#96;&#96;
+ 
+ ### 5. Verify Setup
+ 
+ &#96;&#96;&#96;bash
+ uv run adw --help
+ # Should show: plan, build, test, review, document, ship, sdlc, zte, etc.
+ 
+ # Test config loading
+ uv run python -c "from adw.config import ADWConfig; c = ADWConfig.load(); print(f'project_id: {c.project_id}')"
+ &#96;&#96;&#96;
+ 
+ ---
+ 
+ ## Core Commands
+ 
+ ### Individual Phases
+ 
+ | Command                      | Purpose                                        | Creates ADW ID? |
+ |------------------------------|------------------------------------------------|-----------------|
+ | adw plan &lt;issue&gt;             | Classify â†’ Branch â†’ Worktree â†’ Plan spec       | âœ… Yes          |
+ | adw build &lt;issue&gt; &lt;id&gt;       | Implement plan in worktree                     | âŒ No           |
+ | adw test &lt;issue&gt; &lt;id&gt;        | Run tests, auto-fix (3 retries)                | âŒ No           |
+ | adw review &lt;issue&gt; &lt;id&gt;      | Validate against spec                          | âŒ No           |
+ | adw document &lt;issue&gt; &lt;id&gt;    | Generate docs                                  | âŒ No           |
+ | adw ship &lt;issue&gt; &lt;id&gt;        | Approve + squash merge PR                      | âŒ No           |
+ 
+ ### Composite Workflows
+ 
+ | Command                          | Phases                                    | Auto-Merge?     |
+ |-----------------------------------|-------------------------------------------|-----------------|
+ | adw sdlc &lt;issue&gt; [--skip-e2e]     | planâ†’buildâ†’testâ†’reviewâ†’document           | âŒ Manual       |
+ | adw zte &lt;issue&gt;                   | planâ†’buildâ†’testâ†’reviewâ†’documentâ†’ship      | âœ… Auto âš ï¸      |
+ 
+ 
+ ### Utility Commands
+ 
+ &#96;&#96;&#96;bash
+ adw monitor           # Poll GitHub every 20s for new issues
+ adw webhook           # Real-time GitHub webhook listener
+ adw cleanup &lt;id&gt;      # Remove worktree and clean state
+ &#96;&#96;&#96;
+ 
+ ---
+ 
+ ## Issue Classification Flow
+ 
+ ADW uses &#96;/classify_issue&#96; to route issues:
+ 
+ &#96;&#96;&#96;
+ GitHub Issue â†’ classify_issue â†’ Command Selected
+                     â”‚
+     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+     â–¼               â–¼               â–¼               â–¼
+  /chore          /bug          /feature          0 (stop)
+     â”‚               â”‚               â”‚
+     â–¼               â–¼               â–¼
+  chore.md        bug.md        feature.md
+  (simple)       (surgical)    (extensible)
+ &#96;&#96;&#96;
+ 
+ ### Classification Triggers
+ 
+ | Classification | Triggered By |
+ |---------------|--------------|
+ | &#96;/chore&#96; | Maintenance, docs, refactoring, cleanup |
+ | &#96;/bug&#96; | Something broken, error, regression |
+ | &#96;/feature&#96; | New functionality, enhancement |
+ | &#96;/patch&#96; | Quick targeted fix |
+ | &#96;0&#96; | Unrecognized â†’ workflow stops |
+ 
+ ---
+ 
+ ## State &amp; Logs
+ 
+ ### Directory Structure
+ 
+ &#96;&#96;&#96;
+ artifacts/
+ â””â”€â”€ {github-owner}/
+     â””â”€â”€ {repo-name}/
+         â”œâ”€â”€ {adw_id}/                    # ADW state directory
+         â”‚   â”œâ”€â”€ adw_state.json           # Persistent state
+         â”‚   â”œâ”€â”€ ops/                     # Orchestrator logs
+         â”‚   â”œâ”€â”€ issue_classifier/        # Classifier logs
+         â”‚   â”œâ”€â”€ sdlc_planner/            # Planning logs
+         â”‚   â”œâ”€â”€ sdlc_implementor/        # Build logs
+         â”‚   â”œâ”€â”€ tester/                  # Test logs
+         â”‚   â”œâ”€â”€ reviewer/                # Review logs
+         â”‚   â”‚   â””â”€â”€ review_img/          # Screenshots
+         â”‚   â””â”€â”€ documenter/              # Documentation logs
+         â””â”€â”€ trees/
+             â””â”€â”€ {adw_id}/                # Isolated git worktree
+                 â”œâ”€â”€ .ports.env           # Port assignments
+                 â””â”€â”€ specs/               # Generated plan files
+ &#96;&#96;&#96;
+ 
+ ### State File (&#96;adw_state.json&#96;)
+ 
+ &#96;&#96;&#96;json
+ {
+   "adw_id": "8035e781",
+   "issue_number": "5",
+   "branch_name": "feat-issue-5-adw-8035e781-add-version-info-cli",
+   "plan_file": "specs/issue-5-adw-8035e781-sdlc_planner-add-version-info-cli.md",
+   "issue_class": "/feature",
+   "worktree_path": "/path/to/artifacts/.../trees/8035e781",
+   "backend_port": 9101,
+   "frontend_port": 9201,
+   "model_set": "base",
+   "all_adws": ["adw_plan_iso", "adw_build_iso", "adw_test_iso"]
+ }
+ &#96;&#96;&#96;
+ 
+ ### Reading Logs
+ 
+ &#96;&#96;&#96;bash
+ # Latest agent output (JSONL format)
+ cat artifacts/{org}/{repo}/{adw_id}/sdlc_planner/raw_output.jsonl | tail -20
+ 
+ # Planning output as JSON
+ cat artifacts/{org}/{repo}/{adw_id}/sdlc_planner/raw_output.json | jq .
+ 
+ # Full state
+ cat artifacts/{org}/{repo}/{adw_id}/adw_state.json | jq .
+ 
+ # Review screenshots
+ ls artifacts/{org}/{repo}/{adw_id}/reviewer/review_img/
+ &#96;&#96;&#96;
+ 
+ ---
+ 
+ ## Orchestrator Workflow
+ 
+ ### Starting a New Issue
+ 
+ &#96;&#96;&#96;bash
+ # 1. Create GitHub issue
+ gh issue create --title "[Feature] Add X" --body "## Goal\n..."
+ 
+ # 2. Run full SDLC (recommended)
+ uv run adw sdlc &lt;issue_number&gt; --skip-e2e
+ 
+ # Or run phases individually:
+ uv run adw plan &lt;issue_number&gt;
+ # Note the ADW ID from output
+ uv run adw build &lt;issue_number&gt; &lt;adw_id&gt;
+ uv run adw test &lt;issue_number&gt; &lt;adw_id&gt;
+ uv run adw review &lt;issue_number&gt; &lt;adw_id&gt;
+ &#96;&#96;&#96;
+ 
+ ### Resuming a Workflow
+ 
+ &#96;&#96;&#96;bash
+ # Find existing ADW state
+ ls artifacts/*/*/adw_state.json
+ 
+ # Resume with existing ID
+ uv run adw build &lt;issue_number&gt; &lt;existing_adw_id&gt;
+ &#96;&#96;&#96;
+ 
+ ### Checking Progress
+ 
+ &#96;&#96;&#96;bash
+ # View PR status
+ gh pr view &lt;pr_number&gt;
+ 
+ # View issue comments (ADW posts progress)
+ gh issue view &lt;issue_number&gt; --comments
+ 
+ # Check worktree state
+ cd artifacts/{org}/{repo}/trees/&lt;adw_id&gt;
+ git status
+ git log --oneline -5
+ &#96;&#96;&#96;
+ 
+ ### Cleanup
+ 
+ &#96;&#96;&#96;bash
+ # Remove specific worktree
+ git worktree remove artifacts/{org}/{repo}/trees/&lt;adw_id&gt;
+ 
+ # Or use ADW cleanup (if implemented)
+ uv run adw cleanup &lt;adw_id&gt;
+ &#96;&#96;&#96;
+ 
+ ---
+ 
+ ## Orchestrator Decision Tree
+ 
+ &#96;&#96;&#96;
+ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+ â”‚                   New Task Arrives                           â”‚
+ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
+                            â”‚
+                            â–¼
+ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+ â”‚           Is there a GitHub Issue for this?                  â”‚
+ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
+                            â”‚
+               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+               â–¼ NO                      â–¼ YES
+      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+      â”‚ Create issue   â”‚        â”‚ Get issue #    â”‚
+      â”‚ with gh cli    â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
+      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
+              â”‚                         â”‚
+              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
+                           â”‚
+                           â–¼
+ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+ â”‚              Run: uv run adw sdlc &lt;issue&gt;                    â”‚
+ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
+                            â”‚
+                            â–¼
+ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+ â”‚                   Monitor Progress                           â”‚
+ â”‚  â€¢ Check gh issue view &lt;n&gt; --comments                        â”‚
+ â”‚  â€¢ Check gh pr view &lt;n&gt;                                      â”‚
+ â”‚  â€¢ Review worktree: cd artifacts/.../trees/&lt;id&gt;              â”‚
+ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
+                            â”‚
+               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+               â–¼ FAILED                  â–¼ SUCCESS
+      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+      â”‚ Check logs     â”‚        â”‚ Review PR      â”‚
+      â”‚ Resume phase   â”‚        â”‚ Merge if OK    â”‚
+      â”‚ with adw_id    â”‚        â”‚ Clean up       â”‚
+      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
+ &#96;&#96;&#96;
+ 
+ ---
+ 
+ ## Common Issues
+ 
+ ### "Invalid command selected"
+ **Cause:** &#96;classify_issue&#96; returned empty or unexpected output  
+ **Fix:** Check issue title/body has clear intent (feature/bug/chore)
+ 
+ ### "ModuleNotFoundError: adw"
+ **Cause:** ADW not installed  
+ **Fix:** &#96;uv add --editable /Users/dev3/code4b/adw-framework&#96;
+ 
+ ### "No .adw.yaml found"
+ **Cause:** Missing config file  
+ **Fix:** Create &#96;.adw.yaml&#96; in project root (see Quick Setup)
+ 
+ ### "ANTHROPIC_API_KEY not set"
+ **Cause:** Missing or incomplete &#96;.env&#96; file  
+ **Fix:** Copy &#96;env.example&#96; to &#96;.env&#96; and fill in all required values
+ 
+ ### Network errors posting comments
+ **Cause:** Transient GitHub API failures  
+ **Fix:** Re-run with existing ADW ID: &#96;uv run adw &lt;phase&gt; &lt;issue&gt; &lt;adw_id&gt;&#96;
+ 
+ ### Worktree already exists
+ **Cause:** Previous run left worktree  
+ **Fix:** &#96;git worktree remove artifacts/{org}/{repo}/trees/&lt;adw_id&gt;&#96; then retry
+ 
+ ### Port conflicts
+ **Cause:** Allocated ports in use  
+ **Fix:** ADW auto-finds alternatives, or change &#96;backend_start&#96;/&#96;frontend_start&#96; in &#96;.adw.yaml&#96;
+ 
+ ---
+ 
+ ## Environment Requirements
+ 
+ - **&#96;uv&#96;** - Python package manager ([install](https://docs.astral.sh/uv/))
+ - **&#96;gh&#96;** - GitHub CLI ([install](https://cli.github.com/)) with authentication (&#96;gh auth login&#96;)
+ - **&#96;git&#96;** - Git with worktree support (2.5+)
+ - **Claude Code CLI** - For agent execution ([setup](https://docs.anthropic.com/en/docs/claude-code))
+ - **&#96;.env&#96;** - Environment variables (see Quick Setup)
+ 
+ ---
+ 
+ ## Example: Full Workflow
+ 
+ &#96;&#96;&#96;bash
+ # 1. Setup (one-time)
+ cd /path/to/your-project
+ uv add --editable /Users/dev3/code4b/adw-framework
+ uv sync
+ 
+ # Create .env with your API keys
+ cp /Users/dev3/code4b/adw-framework/env.example .env
+ # Edit .env with your values
+ 
+ # Create .adw.yaml
+ cat &gt; .adw.yaml &lt;&lt; 'EOF'
+ project_id: "your-org/your-repo"
+ artifacts_dir: "./artifacts"
+ EOF
+ 
+ # 2. Create issue
+ gh issue create \
+   --title "[Feature] Add dark mode support" \
+   --body "## Goal\nAdd dark mode toggle...\n\n## Acceptance Criteria\n- Toggle in settings\n- Persists preference"
+ 
+ # 3. Run SDLC
+ uv run adw sdlc 7 --skip-e2e
+ 
+ # 4. Review &amp; merge
+ gh pr view 8
+ gh pr merge 8 --squash
+ 
+ # 5. Cleanup
+ git worktree remove artifacts/your-org/your-repo/trees/&lt;adw_id&gt;
+ &#96;&#96;&#96;
+ 
+ ---
+ 
+ ## Model Selection
+ 
+ ADW supports two model sets controlled via issue/comment text:
+ 
+ &#96;&#96;&#96;
+ model_set base   â†’ Uses Sonnet for all commands (default)
+ model_set heavy  â†’ Uses Opus for complex tasks
+ &#96;&#96;&#96;
+ 
+ ### Heavy Mode Commands (Opus)
+ - &#96;/implement&#96; - Complex implementations
+ - &#96;/document&#96; - Documentation generation
+ - &#96;/resolve_failed_test&#96; - Test debugging
+ - &#96;/chore&#96;, &#96;/bug&#96;, &#96;/feature&#96;, &#96;/patch&#96; - Planning tasks
+ 
+ Add to issue body or comment: &#96;model_set heavy&#96;
+ 
+ ---
+ 
+ ## Advanced: Parallel Execution
+ 
+ ADW supports up to 15 concurrent workflows:
+ 
+ &#96;&#96;&#96;bash
+ # Process multiple issues in parallel
+ uv run adw sdlc 101 &amp;
+ uv run adw sdlc 102 &amp;
+ uv run adw sdlc 103 &amp;
+ 
+ # Each gets isolated:
+ # - Unique worktree: artifacts/.../trees/{adw-id}/
+ # - Unique ports: Deterministically assigned from ID hash
+ # - Unique branch: {type}-issue-{n}-adw-{id}-{slug}
+ &#96;&#96;&#96;
+ 
+ ---
+ 
+ **ADW ID Format:** 8-character hex (e.g., &#96;8035e781&#96;)  
+ **Branch Format:** &#96;{type}-issue-{n}-adw-{id}-{description}&#96;  
+ **Plan Format:** &#96;specs/issue-{n}-adw-{id}-sdlc_planner-{description}.md&#96;
+ 
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Great! I've created the updated command file. Let me also verify the path is correct since the user said "/adw-setup" and I created it at `.claude/commands/adw-setup.md`. Let me check if there's a commands directory structure.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: ls -la /Users/dev3/code4b/adw-framework/.claude/commands/adw-setup.md</summary>

```bash
ls -la /Users/dev3/code4b/adw-framework/.claude/commands/adw-setup.md
```

```
spawn /bin/zsh ENOENT
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
There was an error with the terminal. Let me just check if the file exists using the read_file tool.</details></think>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/.claude/commands/adw-setup.md</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Perfect! The file was created successfully. Let me provide a summary of all the changes I made.</details></think>

---

Perfect! I've updated `/adw-setup` with all the corrections. Here's what changed:

## âœ… **Major Fixes Applied**

### 1. **Installation Commands (Corrected)**
```bash
# Before (BROKEN):
uv add adw-framework --dev --editable /path

# After (WORKING):
uv add --editable /path                    # Active dev
uv add --dev --editable /path              # Dev-only
uv add /path                               # Stable
```

### 2. **Added Missing `.env` Setup (Step 2)**
- Now shows how to copy `env.example`
- Lists all required environment variables:
  - `ANTHROPIC_API_KEY`
  - `GITHUB_PAT`
  - `GITHUB_REPO_URL`
  - `CLAUDE_CODE_PATH`

### 3. **Fixed `.adw.yaml` Port Schema**
```yaml
# Before (WRONG):
ports:
  max_instances: 15

# After (CORRECT):
ports:
  backend_count: 15
  frontend_count: 15
```

### 4. **Commands Auto-Load (Major Change)**
- **Removed** mandatory copy step
- Now marked as "(Optional) Customize Commands"
- Added note: "ADW automatically uses framework commands"
- Only copy if you need to override specific commands

### 5. **Fixed Log Paths**
```bash
# Before (WRONG):
artifacts/*/trees/{adw_id}/sdlc_planner/

# After (CORRECT):
artifacts/{org}/{repo}/{adw_id}/sdlc_planner/
```

### 6. **Added Missing Sections**
- **Model Selection** - `model_set base` vs `model_set heavy`
- **Advanced: Parallel Execution** - Up to 15 concurrent workflows
- **Expanded directory structure** - Shows all agent log directories
- **Environment Requirements** - Added links to install guides

### 7. **Better Error Messages**
- Added "ANTHROPIC_API_KEY not set" troubleshooting
- Added "Port conflicts" explanation
- Fixed command examples to use correct syntax

The command is now accurate and ready to use! The file has been saved to:
```
/Users/dev3/code4b/adw-framework/.claude/commands/adw-setup.md
```

---

_**User (2025-12-28 17:38Z)**_

replace the local copy of that command with a symlink so they don't fall out of sync.

---

_**Agent (model claude-4.5-sonnet-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The user wants me to replace the `.claude/commands/adw-setup.md` file with a symlink to avoid having duplicate copies that can fall out of sync. I need to:

1. Check if there's another copy of this file somewhere else in the repo
2. Delete the current file at `.claude/commands/adw-setup.md`
3. Create a symlink from `.claude/commands/adw-setup.md` to the canonical location

Let me first search for other instances of this file or figure out where the canonical location should be.</details></think>

---

I'll replace the local copy with a symlink to keep them in sync. First, let me check if there's a canonical location for this file:

---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** â€¢ Searched codebase "**/adw-setup.md" â€¢ **0** result in **1** directory</summary>

Directory: **/Users/dev3/code4b/adw-framework** (0 file)

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
The search didn't find the file I just created. Let me check the structure - it seems like this should be in the `commands/` directory (not `.claude/commands/`) as the canonical location, since that's where framework commands live and get bundled with the package.</details></think>

---

<tool-use data-tool-type="generic" data-tool-name="list_dir">
<details>
            <summary>Tool use: **list_dir** â€¢ Listed directory, 0 results</summary>
        
No results found
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
I see - the canonical location should be `/Users/dev3/code4b/adw-framework/commands/adw-setup.md` (in the main commands directory that gets packaged), and then `.claude/commands/adw-setup.md` should be a symlink to it.

So I need to:
1. Copy the current file content from `.claude/commands/adw-setup.md` to `commands/adw-setup.md`
2. Delete `.claude/commands/adw-setup.md`
3. Create a symlink from `.claude/commands/adw-setup.md` -> `../../commands/adw-setup.md`</details></think>

---

I'll move the file to the canonical `commands/` directory and create a symlink:

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** â€¢ Run command: cd /Users/dev3/code4b/adw-framework && cp .claude/commands/adw-setup.md commands/adw-setup.md</summary>

```bash
cd /Users/dev3/code4b/adw-framework && cp .claude/commands/adw-setup.md commands/adw-setup.md
```

```
spawn /bin/zsh ENOENT
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
The shell command failed. Let me just use the file operations tools directly.</details></think>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** â€¢ Read file: /Users/dev3/code4b/adw-framework/.claude/commands/adw-setup.md</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Good, I have the content. Now I'll:
1. Write this to `commands/adw-setup.md`
2. Delete `.claude/commands/adw-setup.md`
3. Create a symlink from `.claude/commands/adw-setup.md` to `../../commands/adw-setup.md`</details></think>

---

<tool-use data-tool-type="write" data-tool-name="write">

<details><summary>Tool use: **write** â€¢ Edit file: /Users/dev3/code4b/adw-framework/commands/adw-setup.md</summary>

**Chunk 1**
Lines added: 424, lines removed: 1

```diff
@@ -1,1 +1,424 @@
- 
+ # ADW Framework Setup &amp; Orchestrator Reference
+ 
+ Complete reference for setting up and running ADW (AI Developer Workflow) in any repository.
+ 
+ ---
+ 
+ ## Quick Setup (New Repo)
+ 
+ ### 1. Add ADW as Dependency
+ 
+ &#96;&#96;&#96;bash
+ cd /path/to/your-project
+ 
+ # For active development (recommended - changes in ADW source reflect immediately):
+ uv add --editable /Users/dev3/code4b/adw-framework
+ 
+ # OR for dev-only usage:
+ uv add --dev --editable /Users/dev3/code4b/adw-framework
+ 
+ # OR for stable production use (copies files, no live updates):
+ uv add /Users/dev3/code4b/adw-framework
+ 
+ uv sync
+ &#96;&#96;&#96;
+ 
+ ### 2. Create &#96;.env&#96; (REQUIRED)
+ 
+ &#96;&#96;&#96;bash
+ # Copy template and fill in your values
+ cp /Users/dev3/code4b/adw-framework/env.example .env
+ 
+ # Edit .env with required values:
+ #   ANTHROPIC_API_KEY=sk-ant-xxxxx
+ #   GITHUB_PAT=ghp_xxxxx
+ #   GITHUB_REPO_URL=https://github.com/your-org/your-repo.git
+ #   CLAUDE_CODE_PATH=/usr/local/bin/claude
+ &#96;&#96;&#96;
+ 
+ ### 3. Create &#96;.adw.yaml&#96; (REQUIRED)
+ 
+ &#96;&#96;&#96;yaml
+ # .adw.yaml - ADW Framework Configuration
+ project_id: "github-owner/repo-name"  # Your GitHub org/repo
+ artifacts_dir: "./artifacts"
+ 
+ # Optional: Override default ports (defaults shown)
+ # ports:
+ #   backend_start: 9100
+ #   backend_count: 15
+ #   frontend_start: 9200
+ #   frontend_count: 15
+ 
+ # Optional: Add custom commands alongside framework commands
+ # commands:
+ #   - "${ADW_FRAMEWORK}/commands"   # Framework commands (auto-included if empty)
+ #   - ".claude/commands"            # Your custom overrides
+ &#96;&#96;&#96;
+ 
+ ### 4. (Optional) Customize Commands
+ 
+ **Note:** ADW automatically uses framework commands. Only copy if you need to customize.
+ 
+ &#96;&#96;&#96;bash
+ # Copy only specific commands you want to override:
+ mkdir -p .claude/commands
+ cp /Users/dev3/code4b/adw-framework/commands/feature.md .claude/commands/
+ # Edit feature.md to match your project structure
+ 
+ # Add to .adw.yaml:
+ # commands:
+ #   - "${ADW_FRAMEWORK}/commands"
+ #   - ".claude/commands"
+ &#96;&#96;&#96;
+ 
+ ### 5. Verify Setup
+ 
+ &#96;&#96;&#96;bash
+ uv run adw --help
+ # Should show: plan, build, test, review, document, ship, sdlc, zte, etc.
+ 
+ # Test config loading
+ uv run python -c "from adw.core.config import ADWConfig; c = ADWConfig.load(); print(f'project_id: {c.project_id}')"
+ &#96;&#96;&#96;
+ 
+ ---
+ 
+ ## Core Commands
+ 
+ ### Individual Phases
+ 
+ | Command                      | Purpose                                        | Creates ADW ID? |
+ |------------------------------|------------------------------------------------|-----------------|
+ | adw plan &lt;issue&gt;             | Classify â†’ Branch â†’ Worktree â†’ Plan spec       | âœ… Yes          |
+ | adw build &lt;issue&gt; &lt;id&gt;       | Implement plan in worktree                     | âŒ No           |
+ | adw test &lt;issue&gt; &lt;id&gt;        | Run tests, auto-fix (3 retries)                | âŒ No           |
+ | adw review &lt;issue&gt; &lt;id&gt;      | Validate against spec                          | âŒ No           |
+ | adw document &lt;issue&gt; &lt;id&gt;    | Generate docs                                  | âŒ No           |
+ | adw ship &lt;issue&gt; &lt;id&gt;        | Approve + squash merge PR                      | âŒ No           |
+ 
+ ### Composite Workflows
+ 
+ | Command                          | Phases                                    | Auto-Merge?     |
+ |-----------------------------------|-------------------------------------------|-----------------|
+ | adw sdlc &lt;issue&gt; [--skip-e2e]     | planâ†’buildâ†’testâ†’reviewâ†’document           | âŒ Manual       |
+ | adw zte &lt;issue&gt;                   | planâ†’buildâ†’testâ†’reviewâ†’documentâ†’ship      | âœ… Auto âš ï¸      |
+ 
+ 
+ ### Utility Commands
+ 
+ &#96;&#96;&#96;bash
+ adw monitor           # Poll GitHub every 20s for new issues
+ adw webhook           # Real-time GitHub webhook listener
+ adw cleanup &lt;id&gt;      # Remove worktree and clean state
+ &#96;&#96;&#96;
+ 
+ ---
+ 
+ ## Issue Classification Flow
+ 
+ ADW uses &#96;/classify_issue&#96; to route issues:
+ 
+ &#96;&#96;&#96;
+ GitHub Issue â†’ classify_issue â†’ Command Selected
+                     â”‚
+     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+     â–¼               â–¼               â–¼               â–¼
+  /chore          /bug          /feature          0 (stop)
+     â”‚               â”‚               â”‚
+     â–¼               â–¼               â–¼
+  chore.md        bug.md        feature.md
+  (simple)       (surgical)    (extensible)
+ &#96;&#96;&#96;
+ 
+ ### Classification Triggers
+ 
+ | Classification | Triggered By |
+ |---------------|--------------|
+ | &#96;/chore&#96; | Maintenance, docs, refactoring, cleanup |
+ | &#96;/bug&#96; | Something broken, error, regression |
+ | &#96;/feature&#96; | New functionality, enhancement |
+ | &#96;/patch&#96; | Quick targeted fix |
+ | &#96;0&#96; | Unrecognized â†’ workflow stops |
+ 
+ ---
+ 
+ ## State &amp; Logs
+ 
+ ### Directory Structure
+ 
+ &#96;&#96;&#96;
+ artifacts/
+ â””â”€â”€ {github-owner}/
+     â””â”€â”€ {repo-name}/
+         â”œâ”€â”€ {adw_id}/                    # ADW state directory
+         â”‚   â”œâ”€â”€ adw_state.json           # Persistent state
+         â”‚   â”œâ”€â”€ ops/                     # Orchestrator logs
+         â”‚   â”œâ”€â”€ issue_classifier/        # Classifier logs
+         â”‚   â”œâ”€â”€ sdlc_planner/            # Planning logs
+         â”‚   â”œâ”€â”€ sdlc_implementor/        # Build logs
+         â”‚   â”œâ”€â”€ tester/                  # Test logs
+         â”‚   â”œâ”€â”€ reviewer/                # Review logs
+         â”‚   â”‚   â””â”€â”€ review_img/          # Screenshots
+         â”‚   â””â”€â”€ documenter/              # Documentation logs
+         â””â”€â”€ trees/
+             â””â”€â”€ {adw_id}/                # Isolated git worktree
+                 â”œâ”€â”€ .ports.env           # Port assignments
+                 â””â”€â”€ specs/               # Generated plan files
+ &#96;&#96;&#96;
+ 
+ ### State File (&#96;adw_state.json&#96;)
+ 
+ &#96;&#96;&#96;json
+ {
+   "adw_id": "8035e781",
+   "issue_number": "5",
+   "branch_name": "feat-issue-5-adw-8035e781-add-version-info-cli",
+   "plan_file": "specs/issue-5-adw-8035e781-sdlc_planner-add-version-info-cli.md",
+   "issue_class": "/feature",
+   "worktree_path": "/path/to/artifacts/.../trees/8035e781",
+   "backend_port": 9101,
+   "frontend_port": 9201,
+   "model_set": "base",
+   "all_adws": ["adw_plan_iso", "adw_build_iso", "adw_test_iso"]
+ }
+ &#96;&#96;&#96;
+ 
+ ### Reading Logs
+ 
+ &#96;&#96;&#96;bash
+ # Latest agent output (JSONL format)
+ cat artifacts/{org}/{repo}/{adw_id}/sdlc_planner/raw_output.jsonl | tail -20
+ 
+ # Planning output as JSON
+ cat artifacts/{org}/{repo}/{adw_id}/sdlc_planner/raw_output.json | jq .
+ 
+ # Full state
+ cat artifacts/{org}/{repo}/{adw_id}/adw_state.json | jq .
+ 
+ # Review screenshots
+ ls artifacts/{org}/{repo}/{adw_id}/reviewer/review_img/
+ &#96;&#96;&#96;
+ 
+ ---
+ 
+ ## Orchestrator Workflow
+ 
+ ### Starting a New Issue
+ 
+ &#96;&#96;&#96;bash
+ # 1. Create GitHub issue
+ gh issue create --title "[Feature] Add X" --body "## Goal\n..."
+ 
+ # 2. Run full SDLC (recommended)
+ uv run adw sdlc &lt;issue_number&gt; --skip-e2e
+ 
+ # Or run phases individually:
+ uv run adw plan &lt;issue_number&gt;
+ # Note the ADW ID from output
+ uv run adw build &lt;issue_number&gt; &lt;adw_id&gt;
+ uv run adw test &lt;issue_number&gt; &lt;adw_id&gt;
+ uv run adw review &lt;issue_number&gt; &lt;adw_id&gt;
+ &#96;&#96;&#96;
+ 
+ ### Resuming a Workflow
+ 
+ &#96;&#96;&#96;bash
+ # Find existing ADW state
+ ls artifacts/*/*/adw_state.json
+ 
+ # Resume with existing ID
+ uv run adw build &lt;issue_number&gt; &lt;existing_adw_id&gt;
+ &#96;&#96;&#96;
+ 
+ ### Checking Progress
+ 
+ &#96;&#96;&#96;bash
+ # View PR status
+ gh pr view &lt;pr_number&gt;
+ 
+ # View issue comments (ADW posts progress)
+ gh issue view &lt;issue_number&gt; --comments
+ 
+ # Check worktree state
+ cd artifacts/{org}/{repo}/trees/&lt;adw_id&gt;
+ git status
+ git log --oneline -5
+ &#96;&#96;&#96;
+ 
+ ### Cleanup
+ 
+ &#96;&#96;&#96;bash
+ # Remove specific worktree
+ git worktree remove artifacts/{org}/{repo}/trees/&lt;adw_id&gt;
+ 
+ # Or use ADW cleanup (if implemented)
+ uv run adw cleanup &lt;adw_id&gt;
+ &#96;&#96;&#96;
+ 
+ ---
+ 
+ ## Orchestrator Decision Tree
+ 
+ &#96;&#96;&#96;
+ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+ â”‚                   New Task Arrives                           â”‚
+ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
+                            â”‚
+                            â–¼
+ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+ â”‚           Is there a GitHub Issue for this?                  â”‚
+ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
+                            â”‚
+               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+               â–¼ NO                      â–¼ YES
+      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+      â”‚ Create issue   â”‚        â”‚ Get issue #    â”‚
+      â”‚ with gh cli    â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
+      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
+              â”‚                         â”‚
+              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
+                           â”‚
+                           â–¼
+ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+ â”‚              Run: uv run adw sdlc &lt;issue&gt;                    â”‚
+ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
+                            â”‚
+                            â–¼
+ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+ â”‚                   Monitor Progress                           â”‚
+ â”‚  â€¢ Check gh issue view &lt;n&gt; --comments                        â”‚
+ â”‚  â€¢ Check gh pr view &lt;n&gt;                                      â”‚
+ â”‚  â€¢ Review worktree: cd artifacts/.../trees/&lt;id&gt;              â”‚
+ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
+                            â”‚
+               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+               â–¼ FAILED                  â–¼ SUCCESS
+      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
+      â”‚ Check logs     â”‚        â”‚ Review PR      â”‚
+      â”‚ Resume phase   â”‚        â”‚ Merge if OK    â”‚
+      â”‚ with adw_id    â”‚        â”‚ Clean up       â”‚
+      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
+ &#96;&#96;&#96;
+ 
+ ---
+ 
+ ## Common Issues
+ 
+ ### "Invalid command selected"
+ **Cause:** &#96;classify_issue&#96; returned empty or unexpected output  
+ **Fix:** Check issue title/body has clear intent (feature/bug/chore)
+ 
+ ### "ModuleNotFoundError: adw"
+ **Cause:** ADW not installed  
+ **Fix:** &#96;uv add --editable /Users/dev3/code4b/adw-framework&#96;
+ 
+ ### "No .adw.yaml found"
+ **Cause:** Missing config file  
+ **Fix:** Create &#96;.adw.yaml&#96; in project root (see Quick Setup)
+ 
+ ### "ANTHROPIC_API_KEY not set"
+ **Cause:** Missing or incomplete &#96;.env&#96; file  
+ **Fix:** Copy &#96;env.example&#96; to &#96;.env&#96; and fill in all required values
+ 
+ ### Network errors posting comments
+ **Cause:** Transient GitHub API failures  
+ **Fix:** Re-run with existing ADW ID: &#96;uv run adw &lt;phase&gt; &lt;issue&gt; &lt;adw_id&gt;&#96;
+ 
+ ### Worktree already exists
+ **Cause:** Previous run left worktree  
+ **Fix:** &#96;git worktree remove artifacts/{org}/{repo}/trees/&lt;adw_id&gt;&#96; then retry
+ 
+ ### Port conflicts
+ **Cause:** Allocated ports in use  
+ **Fix:** ADW auto-finds alternatives, or change &#96;backend_start&#96;/&#96;frontend_start&#96; in &#96;.adw.yaml&#96;
+ 
+ ---
+ 
+ ## Environment Requirements
+ 
+ - **&#96;uv&#96;** - Python package manager ([install](https://docs.astral.sh/uv/))
+ - **&#96;gh&#96;** - GitHub CLI ([install](https://cli.github.com/)) with authentication (&#96;gh auth login&#96;)
+ - **&#96;git&#96;** - Git with worktree support (2.5+)
+ - **Claude Code CLI** - For agent execution ([setup](https://docs.anthropic.com/en/docs/claude-code))
+ - **&#96;.env&#96;** - Environment variables (see Quick Setup)
+ 
+ ---
+ 
+ ## Example: Full Workflow
+ 
+ &#96;&#96;&#96;bash
+ # 1. Setup (one-time)
+ cd /path/to/your-project
+ uv add --editable /Users/dev3/code4b/adw-framework
+ uv sync
+ 
+ # Create .env with your API keys
+ cp /Users/dev3/code4b/adw-framework/env.example .env
+ # Edit .env with your values
+ 
+ # Create .adw.yaml
+ cat &gt; .adw.yaml &lt;&lt; 'EOF'
+ project_id: "your-org/your-repo"
+ artifacts_dir: "./artifacts"
+ EOF
+ 
+ # 2. Create issue
+ gh issue create \
+   --title "[Feature] Add dark mode support" \
+   --body "## Goal\nAdd dark mode toggle...\n\n## Acceptance Criteria\n- Toggle in settings\n- Persists preference"
+ 
+ # 3. Run SDLC
+ uv run adw sdlc 7 --skip-e2e
+ 
+ # 4. Review &amp; merge
+ gh pr view 8
+ gh pr merge 8 --squash
+ 
+ # 5. Cleanup
+ git worktree remove artifacts/your-org/your-repo/trees/&lt;adw_id&gt;
+ &#96;&#96;&#96;
+ 
+ ---
+ 
+ ## Model Selection
+ 
+ ADW supports two model sets controlled via issue/comment text:
+ 
+ &#96;&#96;&#96;
+ model_set base   â†’ Uses Sonnet for all commands (default)
+ model_set heavy  â†’ Uses Opus for complex tasks
+ &#96;&#96;&#96;
+ 
+ ### Heavy Mode Commands (Opus)
+ - &#96;/implement&#96; - Complex implementations
+ - &#96;/document&#96; - Documentation generation
+ - &#96;/resolve_failed_test&#96; - Test debugging
+ - &#96;/chore&#96;, &#96;/bug&#96;, &#96;/feature&#96;, &#96;/patch&#96; - Planning tasks
+ 
+ Add to issue body or comment: &#96;model_set heavy&#96;
+ 
+ ---
+ 
+ ## Advanced: Parallel Execution
+ 
+ ADW supports up to 15 concurrent workflows:
+ 
+ &#96;&#96;&#96;bash
+ # Process multiple issues in parallel
+ uv run adw sdlc 101 &amp;
+ uv run adw sdlc 102 &amp;
+ uv run adw sdlc 103 &amp;
+ 
+ # Each gets isolated:
+ # - Unique worktree: artifacts/.../trees/{adw-id}/
+ # - Unique ports: Deterministically assigned from ID hash
+ # - Unique branch: {type}-issue-{n}-adw-{id}-{slug}
+ &#96;&#96;&#96;
+ 
+ ---
+ 
+ **ADW ID Format:** 8-character hex (e.g., &#96;8035e781&#96;)  
+ **Branch Format:** &#96;{type}-issue-{n}-adw-{id}-{description}&#96;  
+ **Plan Format:** &#96;specs/issue-{n}-adw-{id}-sdlc_planner-{description}.md&#96;
+ 
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Good, now I need to:
1. Delete the `.claude/commands/adw-setup.md` file
2. Create a symlink from `.claude/commands/adw-setup.md` -> `../../commands/adw-setup.md`

I'll use the delete_file tool and then create the symlink using a terminal command.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="delete_file">
<details><summary>Tool use: **delete_file**</summary>

Explanation: Delete the duplicate file before creating a symlink to the canonical version


</details>
</tool-use>

---



---



---



---



---



---



---



---



---

