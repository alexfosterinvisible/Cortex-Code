<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session aaac9821-2297-4705-af4c-a6a539ba7dbe (2025-12-28 17:41Z) -->

# Simple greeting (2025-12-28 17:41Z)

_**User (2025-12-28 17:38Z)**_

hi. Just say "Hi" back, don't think or do anything else.

---

_**Agent (model claude-4.5-opus-high-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The user just wants me to say "Hi" back, nothing else.</details></think>

---

Hi

---

_**User (2025-12-28 17:38Z)**_

/prime 

--- Cursor Command: prime.md ---

READ this **essential reading list** for an agent to understand the ADW Framework:

---

## üìö Core Documentation (Priority Order)

### 1. **`docs/ORCHESTRATOR_GUIDE.md`** ‚≠ê MOST IMPORTANT
This is the single most comprehensive document. It explains:
- Complete workflow lifecycle (plan‚Üíbuild‚Üítest‚Üíreview‚Üídocument‚Üíship)
- CLI commands and their usage
- State & logs locations
- Decision tree for error handling
- Parallel execution support
- GitHub integration patterns

### 2. **`README.md`**
Setup and configuration essentials:
- Package installation
- `.adw.yaml` configuration schema
- `.env` required variables
- Verification checklist
- Basic CLI usage examples

### 3. **`commands/examples/README.md`**
Understanding the command system:
- What app-specific vs framework commands are
- How to customize templates
- Why commands use `[bracketed]` placeholders

---

## üîß Key Source Files (Architecture Understanding)

| File | Purpose |
|------|---------|
| `adw/cli.py` | Entry point - maps CLI commands to workflow modules |
| `adw/config.py` | `ADWConfig` dataclass - loads `.adw.yaml`, handles paths |
| `adw/state.py` | `ADWState` class - persistent JSON state per workflow |
| `adw/agent.py` | Claude Code execution - prompts, retry logic, model selection |
| `adw/workflows/sdlc.py` | Main orchestration - chains all phases together |
| `adw/workflows/plan.py` | Example workflow - shows full pattern (fetch‚Üíclassify‚Üíbranch‚Üíworktree‚Üíplan‚Üícommit‚ÜíPR) |

---

## üìù Command Templates (Understanding Prompts)

| Command | Role |
|---------|------|
| `commands/implement.md` | Core build prompt - simple but central |
| `commands/feature.md` | Full planning template with detailed `Plan Format` |
| `commands/classify_issue.md` | Issue classification (`/chore`, `/bug`, `/feature`) |
| `commands/review.md` | Review process template |

---

## üéØ Key Concepts to Understand

1. **ADW ID** - Unique 8-char identifier per workflow instance
2. **Isolated Worktrees** - Git worktrees under `artifacts/{project_id}/trees/{adw-id}/`  
3. **Port Allocation** - Deterministic ports (9100-9114 backend, 9200-9214 frontend) per instance
4. **State Persistence** - `adw_state.json` carries: `adw_id`, `issue_number`, `branch_name`, `plan_file`, `worktree_path`, `model_set`
5. **Model Selection** - `base` (Sonnet) vs `heavy` (Opus) per command type
6. **Agent Logs** - JSONL format in `artifacts/{org}/{repo}/{adw-id}/{agent}/raw_output.jsonl`

---

## üöÄ Minimal Quick-Start Reading

If time-constrained, read just these three:

1. `docs/ORCHESTRATOR_GUIDE.md` - The "how it all works" guide
2. `adw/workflows/sdlc.py` - See the orchestration flow
3. `adw/workflows/plan.py` - Understand a complete single-phase workflow
--- End Command ---

---

_**Agent (model claude-4.5-opus-high-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The user is asking me to read through the essential documentation to understand the ADW Framework. Let me read the files mentioned in the prime.md command in order of priority.

I'll start by reading the most important files in parallel:
1. docs/ORCHESTRATOR_GUIDE.md - most important
2. README.md - setup essentials
3. commands/examples/README.md - command system understanding

Then I'll read the key source files and command templates.</details></think>

---

I'll read through the essential ADW Framework documentation to understand the architecture. Let me start with the priority documents:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: /Users/dev3/code4b/adw-framework/docs/ORCHESTRATOR_GUIDE.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: /Users/dev3/code4b/adw-framework/README.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: /Users/dev3/code4b/adw-framework/commands/examples/README.md</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Great, I've read the three priority documents. Now let me read the key source files to understand the architecture:
1. adw/cli.py - Entry point
2. adw/config.py - ADWConfig dataclass
3. adw/state.py - ADWState class
4. adw/agent.py - Claude Code execution
5. adw/workflows/sdlc.py - Main orchestration
6. adw/workflows/plan.py - Example workflow pattern</details></think>

---

Now let me read the key source files for architecture understanding:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: /Users/dev3/code4b/adw-framework/adw/cli.py</summary>

</details>
</tool-use>

---

Could not find file '/Users/dev3/code4b/adw-framework/adw/config.py' in the workspace.

---

Could not find file '/Users/dev3/code4b/adw-framework/adw/state.py' in the workspace.

---

Could not find file '/Users/dev3/code4b/adw-framework/adw/agent.py' in the workspace.

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: /Users/dev3/code4b/adw-framework/adw/workflows/sdlc.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: /Users/dev3/code4b/adw-framework/adw/workflows/plan.py</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Some files weren't found - the project structure may have changed. Let me check the actual structure under `adw/` to find `config.py`, `state.py`, and `agent.py`. They may be in a different location.</details></think>

---

Let me check the actual file structure to find the missing files:

---

<tool-use data-tool-type="generic" data-tool-name="list_dir">
<details>
            <summary>Tool use: **list_dir** ‚Ä¢ Listed directory, 0 results</summary>
        
No results found
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
I see - the files are under `adw/core/` not directly under `adw/`. Let me read those files now.</details></think>

---

Now let me read the core files and command templates:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: /Users/dev3/code4b/adw-framework/adw/core/config.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: /Users/dev3/code4b/adw-framework/adw/core/state.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: /Users/dev3/code4b/adw-framework/adw/core/agent.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: /Users/dev3/code4b/adw-framework/commands/implement.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: /Users/dev3/code4b/adw-framework/commands/feature.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: /Users/dev3/code4b/adw-framework/commands/classify_issue.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: /Users/dev3/code4b/adw-framework/commands/review.md</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
I've now read through all the essential documentation for the ADW Framework. Let me summarize my understanding:

## ADW Framework Summary

### Core Concepts
1. **ADW (AI Developer Workflow)** - Automates software development using Claude Code agents in isolated git worktrees
2. **ADW ID** - Unique 8-char identifier per workflow instance
3. **Isolated Worktrees** - Git worktrees under `artifacts/{project_id}/trees/{adw-id}/` for parallel execution
4. **Port Allocation** - Deterministic ports (9100-9114 backend, 9200-9214 frontend) per instance
5. **State Persistence** - `adw_state.json` carries: `adw_id`, `issue_number`, `branch_name`, `plan_file`, `worktree_path`, `model_set`
6. **Model Selection** - `base` (Sonnet) vs `heavy` (Opus) per command type

### Workflow Lifecycle
1. **Plan** - Creates worktree + implementation plan (issue classification, branch creation, plan generation)
2. **Build** - Implements the plan using `/implement` command
3. **Test** - Runs pytest + optional E2E tests with auto-retry
4. **Review** - Validates implementation against spec with screenshots
5. **Document** - Generates feature documentation
6. **Ship** (ZTE only) - Approves + merges PR

### Architecture
- **CLI** (`adw/cli.py`) - Entry point mapping CLI commands to workflow modules
- **Config** (`adw/core/config.py`) - `ADWConfig` dataclass loading `.adw.yaml`
- **State** (`adw/core/state.py`) - `ADWState` class for persistent JSON state per workflow
- **Agent** (`adw/core/agent.py`) - Claude Code execution with prompts, retry logic, model selection


- **Workflows** - Modular phase implementations in separate Python modules for plan, build, test, and other critical stages

### Execution Options
The framework offers flexible command-line interfaces for different development scenarios:
- Full Software Development Life Cycle (SDLC) with comprehensive workflow
- Zero Touch Execution (ZTE) for automated end-to-end process including auto-merging
- Granular phase-specific commands allowing targeted workflow management

### Project Structure Highlights
The framework maintains a clean, organized project layout with dedicated directories for configuration, artifacts, and workflow-specific modules, ensuring clear separation of concerns and easy management of development artifacts.</details></think>

---

I've read through all the essential ADW Framework documentation. Here's my understanding:

---

## üéØ ADW Framework Summary

### Core Concept
**ADW (AI Developer Workflow)** automates software development using **Claude Code agents** in **isolated git worktrees**. It turns GitHub issues into shipped features through a structured lifecycle.

---

### üîë Key Concepts

| Concept | Description |
|---------|-------------|
| **ADW ID** | Unique 8-char identifier per workflow (e.g., `abc12345`) |
| **Isolated Worktrees** | Each workflow gets its own git worktree at `artifacts/{project_id}/trees/{adw-id}/` |
| **Port Allocation** | Deterministic ports: backend 9100-9114, frontend 9200-9214 |
| **State Persistence** | `adw_state.json` tracks: `adw_id`, `issue_number`, `branch_name`, `plan_file`, `worktree_path`, `model_set` |
| **Model Selection** | `base` (Sonnet) vs `heavy` (Opus) - configurable per command |

---

### üîÑ Workflow Lifecycle

```
Issue ‚Üí Plan ‚Üí Build ‚Üí Test ‚Üí Review ‚Üí Document ‚Üí Ship
```

1. **Plan** - Creates worktree, classifies issue, generates branch, creates implementation plan in `specs/`
2. **Build** - Executes `/implement` with plan file, commits changes
3. **Test** - Runs pytest + E2E tests, auto-fixes failures (3 retries)
4. **Review** - Validates against spec, takes screenshots via Playwright MCP
5. **Document** - Generates feature docs to `app_docs/`
6. **Ship** (ZTE only) - Approves PR + squash merges to main

---

### üèóÔ∏è Architecture

| File | Purpose |
|------|---------|
| `adw/cli.py` | Entry point - maps commands to workflow modules |
| `adw/core/config.py` | `ADWConfig` dataclass - loads `.adw.yaml` |
| `adw/core/state.py` | `ADWState` class - persistent JSON state |
| `adw/core/agent.py` | Claude Code execution - model selection, retry logic, JSONL parsing |
| `adw/workflows/sdlc.py` | Main orchestrator - chains all phases |
| `adw/workflows/plan.py` | Full single-phase workflow pattern |
| `adw/integrations/` | Git ops, GitHub API, worktree management |

---

### üìù Command Templates

| Command | Role |
|---------|------|
| `/implement` | Simple build prompt - reads plan, implements, reports |
| `/feature` | Full planning template with structured `Plan Format` |
| `/classify_issue` | Routes to `/chore`, `/bug`, `/feature`, or `/patch` |
| `/review` | Validates implementation against spec with screenshots |

---

### ‚öôÔ∏è Model Selection Map (from `agent.py`)

- **Base set** ‚Üí Sonnet for all commands
- **Heavy set** ‚Üí Opus for: `/implement`, `/document`, `/resolve_failed_test`, `/chore`, `/bug`, `/feature`, `/patch`

---

### üöÄ Quick Commands

```bash
# Full SDLC (plan‚Üíbuild‚Üítest‚Üíreview‚Üídocument)
uv run adw sdlc <issue-number>

# Zero Touch Execution (SDLC + auto-merge) ‚ö†Ô∏è
uv run adw zte <issue-number>

# Individual phases
uv run adw plan 42           # Creates worktree + plan
uv run adw build 42 abc12345 # Implements plan
uv run adw test 42 abc12345  # Runs tests
uv run adw review 42 abc12345 --skip-resolution
```

---

I'm now fully primed on the ADW Framework architecture. What would you like to work on?

---

